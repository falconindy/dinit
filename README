Inspired by kinit, with borrowed bits from busybox.

This will someday hopefully be merged into geninit.

